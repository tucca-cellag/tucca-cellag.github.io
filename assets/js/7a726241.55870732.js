"use strict";(self.webpackChunktucca_cellag=self.webpackChunktucca_cellag||[]).push([[649],{3093:(e,n,s)=>{s.d(n,{A:()=>o});s(6540);var t=s(4164),r=s(8774),i=s(4848);function o({size:e=null,outline:n=!1,variant:s="primary",block:o=!1,disabled:a=!1,className:l,style:c,link:d,label:u}){const h=e?{sm:"sm",small:"sm",lg:"lg",large:"lg",medium:null}[e]:"",m=h?`button--${h}`:"",x=n?"button--outline":"",p=s?`button--${s}`:"",g=o?"button--block":"",j=a?"disabled":"",f=a?null:d;return(0,i.jsx)(r.A,{to:f,children:(0,i.jsx)("button",{className:(0,t.A)("button",m,x,p,g,j,l),style:c,role:"button","aria-disabled":a,children:u})})}},3964:(e,n,s)=>{s.d(n,{A:()=>i});s(6540);var t=s(4164),r=s(4848);const i=({className:e,style:n,children:s,textAlign:i,variant:o,italic:a=!1,noDecoration:l=!1,transform:c,breakWord:d=!1,truncate:u=!1,weight:h})=>{const m=i?`text--${i}`:"",x=o?`text--${o}`:"",p=a?"text--italic":"",g=l?"text-no-decoration":"",j=c?`text--${c}`:"",f=d?"text--break":"",b=u?"text--truncate":"",v=h?`text--${h}`:"";return(0,r.jsx)("div",{className:(0,t.A)("card__body",e,m,j,x,p,g,f,b,v),style:n,children:s})}},7261:(e,n,s)=>{s.d(n,{A:()=>i});s(6540);var t=s(4164),r=s(4848);const i=({className:e,style:n,children:s,textAlign:i,variant:o,italic:a=!1,noDecoration:l=!1,transform:c,breakWord:d=!1,truncate:u=!1,weight:h})=>{const m=i?`text--${i}`:"",x=o?`text--${o}`:"",p=a?"text--italic":"",g=l?"text-no-decoration":"",j=c?`text--${c}`:"",f=d?"text--break":"",b=u?"text--truncate":"",v=h?`text--${h}`:"";return(0,r.jsx)("div",{className:(0,t.A)("card__footer",e,m,j,x,p,g,f,b,v),style:n,children:s})}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},9223:(e,n,s)=>{s.d(n,{A:()=>i});s(6540);var t=s(4164),r=s(4848);const i=({className:e,style:n,children:s,textAlign:i,variant:o,italic:a=!1,noDecoration:l=!1,transform:c,breakWord:d=!1,truncate:u=!1,weight:h})=>{const m=i?`text--${i}`:"",x=o?`text--${o}`:"",p=a?"text--italic":"",g=l?"text-no-decoration":"",j=c?`text--${c}`:"",f=d?"text--break":"",b=u?"text--truncate":"",v=h?`text--${h}`:"";return(0,r.jsx)("div",{className:(0,t.A)("card__header",e,m,j,x,p,g,f,b,v),style:n,children:s})}},9497:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"tucca-rna-seq/tufts-specific/hpc-best-practices","title":"Tufts HPC Best Practices","description":"This guide provides advanced tips and best practices for using the tucca-rna-seq","source":"@site/docs/tucca-rna-seq/tufts-specific/hpc-best-practices.mdx","sourceDirName":"tucca-rna-seq/tufts-specific","slug":"/tucca-rna-seq/tufts-specific/hpc-best-practices","permalink":"/tucca-rna-seq/tufts-specific/hpc-best-practices","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"title":"Tufts HPC Best Practices"},"sidebar":"tucca_rna_seq","previous":{"title":"Tufts HPC Quick Start Guide","permalink":"/tucca-rna-seq/tufts-specific/hpc-quick-start"},"next":{"title":"Setting Up Tufts HPC Access in VSCode","permalink":"/tucca-rna-seq/tufts-specific/tufts-hpc-in-vscode"}}');var r=s(4848),i=s(8453),o=(s(8774),s(3093));s(9959),s(9223),s(3964),s(7261);const a={title:"Tufts HPC Best Practices"},l="Tufts HPC Best Practices",c={},d=[{value:"Storage Management",id:"storage-management",level:2},{value:"Directory Structure",id:"directory-structure",level:3},{value:"Storage Quotas",id:"storage-quotas",level:3},{value:"Persistent Software Caching",id:"persistent-software-caching",level:3},{value:"Creating Private Modules for Custom Software",id:"creating-private-modules-for-custom-software",level:3},{value:"Global Conda Configuration (<code>.condarc</code>)",id:"global-conda-configuration-condarc",level:3},{value:"Data Management",id:"data-management",level:3},{value:"Resource Allocation",id:"resource-allocation",level:2},{value:"Interactive Sessions",id:"interactive-sessions",level:3},{value:"Workflow Execution Strategy",id:"workflow-execution-strategy",level:2},{value:"Recommended: Interactive Session",id:"recommended-interactive-session",level:3},{value:"Alternative: Batch Submission",id:"alternative-batch-submission",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Module Management",id:"module-management",level:3},{value:"Workflow Optimization",id:"workflow-optimization",level:3},{value:"Monitoring and Debugging",id:"monitoring-and-debugging",level:2},{value:"Job Monitoring",id:"job-monitoring",level:3},{value:"Resource Monitoring",id:"resource-monitoring",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Getting Help",id:"getting-help",level:3},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"tufts-hpc-best-practices",children:"Tufts HPC Best Practices"})}),"\n",(0,r.jsxs)(n.p,{children:["This guide provides advanced tips and best practices for using the ",(0,r.jsx)(n.code,{children:"tucca-rna-seq"}),"\nworkflow on the Tufts HPC cluster efficiently and effectively."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"storage-management",children:"Storage Management"}),"\n",(0,r.jsx)(n.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Recommended organization:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/cluster/tufts/your_lab/your_utln/\n\u251c\u2500\u2500 projects/\n\u2502   \u251c\u2500\u2500 project_1/\n\u2502   \u2502   \u251c\u2500\u2500 tucca-rna-seq/\n\u2502   \u2502   \u251c\u2500\u2500 data/\n\u2502   \u2502   \u2514\u2500\u2500 results/\n\u2502   \u2514\u2500\u2500 project_2/\n\u2514\u2500\u2500 shared_resources/\n    \u251c\u2500\u2500 reference_genomes/\n    \u2514\u2500\u2500 software_cache/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"storage-quotas",children:"Storage Quotas"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Home directory"})," (",(0,r.jsx)(n.code,{children:"/cluster/home/your_utln"}),"): 10GB limit"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lab workspace"})," (",(0,r.jsx)(n.code,{children:"/cluster/tufts/your_lab/your_utln"}),"): 1TB+ available"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor usage"}),": ",(0,r.jsx)(n.code,{children:"quota"})," command"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Archive old projects"})," to free up space"]}),"\n"]}),"\n",(0,r.jsx)(o.A,{label:"TTS Research Technology Lab Research Project Storage Guide",link:"https://rtguides.it.tufts.edu/hpc/access/30-storage.html",variant:"primary"}),"\n",(0,r.jsx)(n.h3,{id:"persistent-software-caching",children:"Persistent Software Caching"}),"\n",(0,r.jsxs)(n.p,{children:["To avoid filling your home directory and to save time by reusing software\nenvironments across multiple projects, it is highly recommended to set up a\npermanent, shared cache. You can do this by defining environment variables in\nyour shell's startup file (e.g., ",(0,r.jsx)(n.code,{children:"~/.bashrc"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["This is also a good place to add the ",(0,r.jsx)(n.code,{children:"module load"})," commands you use frequently."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Add to your ~/.bashrc\n\n# Load required software\nmodule load snakemake/8.27.1\nmodule load singularity/3.8.4\nmodule load miniforge/24.11.2-py312\n\n# Set permanent cache directories for Snakemake\nexport SNAKEMAKE_CONDA_PREFIX="/cluster/tufts/your_lab/shared/conda_envs"\nexport SNAKEMAKE_APPTAINER_PREFIX="/cluster/tufts/your_lab/shared/apptainer_images"\n'})}),"\n",(0,r.jsx)(o.A,{label:"Tufts HPC Guide: Conda Environments",link:"https://rtguides.it.tufts.edu/hpc/application/10-condaenv.html#configure-your-conda",variant:"primary"}),"\n",(0,r.jsx)(n.h3,{id:"creating-private-modules-for-custom-software",children:"Creating Private Modules for Custom Software"}),"\n",(0,r.jsxs)(n.p,{children:["For any software you install manually (like a specific version of Snakemake via\nMambaforge), creating a private environment module is an excellent way to\nintegrate it seamlessly into your HPC workflow. This makes loading your custom\ntools as easy as loading system-wide modules (e.g., ",(0,r.jsx)(n.code,{children:"module load my-snakemake"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["The process involves creating a simple text file that defines the necessary\nenvironment variables (like ",(0,r.jsx)(n.code,{children:"PATH"}),") for your software and placing it in a\nspecific directory (",(0,r.jsx)(n.code,{children:"~/privatemodules"})," on the Tufts cluster)."]}),"\n",(0,r.jsx)(o.A,{label:"Tufts HPC Guide: Creating Private Modules",link:"https://rtguides.it.tufts.edu/hpc/examples/privatemodule.html",variant:"primary"}),"\n",(0,r.jsxs)(n.h3,{id:"global-conda-configuration-condarc",children:["Global Conda Configuration (",(0,r.jsx)(n.code,{children:".condarc"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["The Snakemake-specific environment variables described in the previous section\nare an excellent way to control software caching ",(0,r.jsx)(n.em,{children:"per-workflow"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["As a more general ",(0,r.jsx)(n.strong,{children:"alternative"}),", you can configure Conda's default settings\nglobally using a ",(0,r.jsx)(n.code,{children:".condarc"})," file in your home directory. This tells Conda where\nto store package caches and environments for ",(0,r.jsx)(n.strong,{children:"all"}),' uses, not just for this\nSnakemake workflow. This is a powerful, "set-it-and-forget-it" solution that\nis a common best practice on many HPC systems.']}),"\n",(0,r.jsxs)(n.p,{children:["To configure this, you add the desired paths to a ",(0,r.jsx)(n.code,{children:".condarc"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="~/.condarc"',children:"envs_dirs:\n  - /path/to/your/shared/storage/conda_envs/\npkgs_dirs:\n  - /path/to/your/shared/storage/conda_pkgs/\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Tufts-Specific Example",type:"info",children:(0,r.jsxs)(n.p,{children:["For a detailed, Tufts-specific walkthrough of this process, please refer to the\nofficial TTS Research Technology guide on ",(0,r.jsx)(n.a,{href:"https://rtguides.it.tufts.edu/hpc/application/10-condaenv.html#configure-your-conda",children:"Configuring Conda Environments"}),".\nThe principles in this guide can be adapted for most HPC clusters."]})}),"\n",(0,r.jsx)(n.h3,{id:"data-management",children:"Data Management"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use symbolic links for large data:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Link reference genomes to avoid duplication\nln -s /cluster/tufts/kaplanlab/shared/reference_genomes/human_GRCh38/ \\\\\n  resources/reference_genomes/human_GRCh38\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Compress old results:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Archive completed projects\ntar -czf project_archive_$(date +%Y%m%d).tar.gz project_directory/\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"resource-allocation",children:"Resource Allocation"}),"\n",(0,r.jsx)(n.h3,{id:"interactive-sessions",children:"Interactive Sessions"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Basic interactive session:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"srun -p interactive --pty bash\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Customized interactive session:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"srun -p interactive -n 4 --mem=8G --time=2:00:00 --pty bash\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-n"}),": Number of CPU cores"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--mem"}),": Memory allocation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--time"}),": Maximum runtime"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-p"}),": Partition (interactive, batch, gpu)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"workflow-execution-strategy",children:"Workflow Execution Strategy"}),"\n",(0,r.jsxs)(n.p,{children:["For running Snakemake on the Tufts HPC, we recommend launching the workflow\nfrom within a long-running ",(0,r.jsx)(n.strong,{children:"interactive session"}),", rather than submitting the\nentire workflow as a single batch job."]}),"\n",(0,r.jsx)(n.p,{children:"The main Snakemake process is not computationally intensive; its primary role is\nto manage and submit the actual resource-intensive tasks to the cluster\nscheduler. Running it interactively makes it much easier to monitor progress,\nview logs in real-time, and debug any issues that arise."}),"\n",(0,r.jsxs)(n.p,{children:["For detailed instructions on how to execute the workflow, please refer to the\nmain ",(0,r.jsx)(n.a,{href:"./../running",children:"Running Guide"}),". The sections below provide\nsupplementary, Tufts-specific best practices."]}),"\n",(0,r.jsx)(n.h3,{id:"recommended-interactive-session",children:"Recommended: Interactive Session"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Start a long-running ",(0,r.jsx)(n.code,{children:"screen"})," or ",(0,r.jsx)(n.code,{children:"tmux"})," session."]}),"\nA terminal multiplexer is essential for preventing your workflow from being\nterminated if your local connection to the HPC is interrupted."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Start a screen session\nscreen -S snakemake_session\n\n# To detach: Ctrl+A, then D\n# To reattach later: screen -r snakemake_session\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Request an interactive node."}),"\nFrom within your ",(0,r.jsx)(n.code,{children:"screen"})," session, request an interactive node with\nenough time for your workflow to complete. A 1 to 3-day allocation is a\nsafe starting point."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Request a 3-day interactive session\nsrun -p interactive --time=3-00:00:00 --pty bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prepare your environment and run the workflow."}),"\nOnce in the interactive session, navigate to your project directory, load\nthe necessary modules, and launch Snakemake."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to your project\ncd /cluster/tufts/your_lab/your_utln/my_rnaseq_project/tucca-rna-seq\n\n# Load modules\nmodule purge\nmodule load snakemake/8.27.1 singularity/3.8.4 miniforge/24.11.2-py312\n\n# Launch the workflow\nsnakemake all --workflow-profile profiles/slurm\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[":::danger[CRITICAL] Your Session Must Not Be Interrupted\nIf you run a workflow without a terminal multiplexer like ",(0,r.jsx)(n.code,{children:"screen"})," or ",(0,r.jsx)(n.code,{children:"tmux"}),",\nyour SSH session must remain active. If your computer sleeps or loses its\ninternet connection, the session will terminate, and your Snakemake workflow\nwill be killed."]}),"\n",(0,r.jsxs)(n.p,{children:["If you cannot use a multiplexer, you must ensure your local machine does not\ngo to sleep. For macOS, we recommend the free utility\n",(0,r.jsx)(n.a,{href:"https://apps.apple.com/us/app/amphetamine/id937984704?mt=12",children:(0,r.jsx)(n.strong,{children:"Amphetamine"})}),"\nto keep your Mac awake for a specified duration.\n:::"]}),"\n",(0,r.jsx)(n.h3,{id:"alternative-batch-submission",children:"Alternative: Batch Submission"}),"\n",(0,r.jsx)(n.p,{children:'If you cannot maintain a persistent interactive session, you can submit the\nworkflow as a "fire-and-forget" batch job. You will be notified by email when\nthe job completes or fails, but you lose the ability to monitor the workflow\nin real-time easily.'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example submission script:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create submission script\ncat > submit_workflow.sh << 'EOF'\n#!/bin/bash\n#SBATCH -p batch\n#SBATCH --time=7-00:00:00\n#SBATCH --mem=32G\n#SBATCH --cpus-per-task=12\n#SBATCH --mail-type=ALL\n#SBATCH --mail-user=your.email@tufts.edu\n\nmodule purge\nmodule load snakemake/8.27.1 singularity/3.8.4 miniforge/24.11.2-py312\n\nsnakemake all --workflow-profile profiles/slurm\nEOF\n\n# Submit the job\nsbatch submit_workflow.sh\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,r.jsx)(n.h3,{id:"module-management",children:"Module Management"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Always purge modules first:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"module purge\nmodule load snakemake/8.27.1\nmodule load singularity/3.8.4\nmodule load miniforge/24.11.2-py312\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check module conflicts:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"module list\nmodule show snakemake/8.27.1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"workflow-optimization",children:"Workflow Optimization"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Tune workflow resources:"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"slurm"})," profile allows you to specify default and rule-specific resources.\nFor a complete guide on how this works, see the main\n",(0,r.jsx)(n.a,{href:"./../install-and-config/configuration",children:"Configuration Guide"}),". Below is a\nTufts-specific example."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# profiles/slurm/config.v8+.yaml\ndefault-resources:\n  slurm_partition: "batch"\n  slurm_account: "default"\n  runtime: 4320        # 3 days\n  mem_mb: 32000        # 32GB RAM\n  cpus_per_task: 12    # 12 CPU cores\n\n# Override for specific rules\nset-resources:\n  star_index:\n    mem_mb: 64000      # 64GB RAM for genome indexing\n    runtime: 8640      # 6 days\n  salmon_quant:\n    cpus_per_task: 8   # 8 cores for quantification\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parallel execution:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Limit concurrent jobs\nsnakemake all --workflow-profile profiles/slurm --jobs 50\n\n# Use all available cores locally\nsnakemake all --use-conda --cores all\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-and-debugging",children:"Monitoring and Debugging"}),"\n",(0,r.jsx)(n.h3,{id:"job-monitoring",children:"Job Monitoring"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check job status:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Your jobs\nsqueue -u $USER\n\n# All jobs in partition\nsqueue -p batch\n\n# Detailed job information\nsqueue -j <job_id> -o "%.18i %.9P %.20j %.8u %.2t %.10M %.6D %R"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitor workflow progress:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# View Snakemake logs\ntail -f .snakemake/log/$(date +%Y-%m-%d)/snakemake.log\n\n# Check specific job logs\nsnakemake --show-failed-logs\n"})}),"\n",(0,r.jsx)(n.h3,{id:"resource-monitoring",children:"Resource Monitoring"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check cluster status:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Cluster load\nsinfo\n\n# Partition usage\nsinfo -p batch\n\n# Node information\nsinfo -N -l\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitor your usage:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check quotas\nquota\n\n# Check disk usage\ndu -sh /cluster/tufts/your_lab/your_utln/*\n\n# Check recent jobs\nsacct -u $USER --starttime=$(date -d '7 days ago' +%Y-%m-%d)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Issue"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Jobs stuck in queue"})}),(0,r.jsx)(n.td,{children:"Resource limits too high"}),(0,r.jsx)(n.td,{children:"Reduce memory/CPU requirements"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Module not found"})}),(0,r.jsx)(n.td,{children:"Module not available"}),(0,r.jsxs)(n.td,{children:["Check ",(0,r.jsx)(n.code,{children:"module avail"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Permission denied"})}),(0,r.jsx)(n.td,{children:"Wrong directory"}),(0,r.jsx)(n.td,{children:"Use lab workspace, not home"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Quota exceeded"})}),(0,r.jsx)(n.td,{children:"Storage limit reached"}),(0,r.jsx)(n.td,{children:"Archive old projects"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Job killed"})}),(0,r.jsx)(n.td,{children:"Time limit exceeded"}),(0,r.jsxs)(n.td,{children:["Increase ",(0,r.jsx)(n.code,{children:"--time"})," parameter"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"TTS Research Technology:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Email"}),": ",(0,r.jsx)(n.a,{href:"mailto:rt@tufts.edu",children:"rt@tufts.edu"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HPC Guides"}),": ",(0,r.jsx)(n.a,{href:"https://rtguides.it.tufts.edu/hpc/",children:"https://rtguides.it.tufts.edu/hpc/"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Workflow-specific issues:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GitHub Issues"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/tucca-cellag/tucca-rna-seq/issues",children:"Report problems"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Team Contact"}),": ",(0,r.jsx)(n.a,{href:"mailto:benjamin.bromberg@tufts.edu",children:"benjamin.bromberg@tufts.edu"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"After mastering these best practices:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize your workflow"})," for your specific analysis needs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Share resources"})," with lab members when possible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Contribute"})," to the workflow development"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Help others"})," in your lab get started"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"These best practices will help you use the Tufts HPC cluster efficiently and\navoid common pitfalls. Remember to always check the main documentation first!"})}),"\n",(0,r.jsxs)(n.p,{children:["For complete workflow documentation, see the ",(0,r.jsx)(n.a,{href:"./../introduction",children:"main guides"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},9959:(e,n,s)=>{s.d(n,{A:()=>i});s(6540);var t=s(4164),r=s(4848);const i=({className:e,style:n,children:s,shadow:i})=>{const o=i?`item shadow--${i}`:"";return(0,r.jsx)("div",{className:(0,t.A)("card",e,o),style:n,children:s})}}}]);